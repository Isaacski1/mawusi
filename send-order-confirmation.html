<!DOCTYPE html>
<html>
  <head>
    <title>Send Order Confirmation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 50px 20px;
        background: #f7fafc;
      }
      .loading {
        font-size: 18px;
        color: #2d3748;
      }
      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #38a169;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 20px auto;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .success {
        color: #38a169;
        font-size: 18px;
      }
      .error {
        color: #e53e3e;
        font-size: 16px;
      }
    </style>
    <script>
      function sendOrderConfirmation() {
        try {
          // Get parameters from URL
          const urlParams = new URLSearchParams(window.location.search);

          const name = urlParams.get("name") || "";
          const email = urlParams.get("email") || "";
          const order_id = urlParams.get("order_id") || "";
          const delivery = urlParams.get("delivery") || "";

          if (!name || !email) {
            document.getElementById("status").innerHTML =
              '<p class="error">Missing order information. Please go back and try again.</p>';
            return;
          }

          // Create the email body for ORDER confirmation
          const emailBody = `Dear ${name},

Thank you for your order.

We have received your order and our kitchen is preparing it with care. Your meal will be delivered as requested: ${delivery}.

You can expect:
- Freshly prepared meal
- On-time delivery
- Quality packaging

If you have any special requests or need to make changes, please reply to this email or call us at 054 917 5604.

We appreciate your business!

Best regards,
Mawusi Restaurant
üìç Agona Swedru, Central Region Ghana
üìû 024 404 6745`;

          // Create the mailto link
          const subject = `Order Confirmation - ${order_id}`;
          const mailtoLink = `mailto:${email}?subject=${encodeURIComponent(
            subject
          )}&body=${encodeURIComponent(emailBody)}`;

          // Redirect to email client
          window.location.href = mailtoLink;

          // Show success message
          setTimeout(function () {
            document.getElementById("status").innerHTML =
              '<p class="success">‚úì Email client opened! You can close this window.</p>' +
              '<p style="color: #718096; font-size: 14px; margin-top: 20px;">If the email didn\'t open automatically, please check your email client settings.</p>';
          }, 1000);
        } catch (error) {
          document.getElementById("status").innerHTML =
            '<p class="error">Error opening email client. Please try again.</p>';
        }
      }

      // Start when page loads
      window.onload = sendOrderConfirmation;
    </script>
  </head>
  <body>
    <div class="loading">
      <div class="spinner"></div>
      <p>Opening your email client...</p>
      <div id="status"></div>
    </div>
  </body>
</html>
